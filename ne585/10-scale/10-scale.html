<!DOCTYPE html>
<html>
  <head>
    <title>10. SCALE</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(https://fonts.googleapis.com/css?family=Ubuntu:500);
      @import url(https://fonts.googleapis.com/css?family=Open+Sans);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Open Sans', sans-serif; }
      h1, h2, h3 {
        font-family: 'Ubuntu';
        font-weight: normal;
        }
      .remark-container {background-color: #F5F5F5; }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-slide-content { background-color: #FFFAF0; font-size: 26px; 
                         h1 { font-size: 38px; } h2 {font-size: 32px; } h3 { font-size: 28px; }
       }
      .remark-slide-number { bottom: 8px; position: absolute; right: 8px; }
    </style>
  </head>
  <body>
<textarea id="source">
class: center,middle

# NE585
## NUCLEAR FUEL CYCLE ANALYSIS
### SCALE

#### 10

.right[**R. A. Borrelli**  
**@TheDoctorRAB**]
---
# Outcomes for the lecture

Content courtesy of Prof. Steven E. Skutnik  
Department of Nuclear Engineering  
The University of Tennessee-Knoxville

Understanding the capabilities of SCALE

Building input files

Analyzing output files
---
class: center,middle

## Nuclear fuel depletion calculations with Origen
---
## How do we calculate used fuel isotopic content?

Origen (part of SCALE) is used to calculate isotopic inventories for an assembly, given:

A collapsed one-group cross-section library  
Fuel assembly initial enrichment  
Assembly irradiation history and cooling time
---
### Origen libraries are pre-calculated lattice physics solutions
![Lattice assembly](img/lattice.jpg)
---
### Origen solves for the time-dependent neutron flux in the assembly using lattice physics transport tools like **TRITON**

Calculating an “assembly average” flux and collapsing to one group, this time-dependent flux is then used to solve for isotopic concentrations

<a href="https://www.codecogs.com/eqnedit.php?latex=\dpi{300}&space;\LARGE&space;\underline{N}'&space;=&space;\underline{N_0}&space;\cdot&space;\underline{\underline{A}}&space;\cdot&space;\phi" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\dpi{300}&space;\LARGE&space;\underline{N}'&space;=&space;\underline{N_0}&space;\cdot&space;\underline{\underline{A}}&space;\cdot&space;\phi" title="\LARGE \underline{N}' = \underline{N_0} \cdot \underline{\underline{A}} \cdot \phi" /></a>
---
# What do ORIGEN calculations assume?

“Assembly-averaged” burnup characteristics - flux, burnup, etc. produces “averaged” isotopic concentrations

Works well for “bulk” assembly characteristics – i.e., decay heat, concentrations, etc.

In other words, an “average,” uniform burnup across the assembly – point depletion
---
## Origen depletion calculation flow
![Origen material flow](img/origen_depletion.calculation.flow.jpg)
---
## Origen reactor data library interpolation
![Origen interpolation](img/origen_interpolation.jpg)
---
# ARP input format (LEU / UOX)

ORIGEN-ARP is a SCALE isotopic depletion and decay analysis sequence used to perform point-depletion calculations using problem-dependent cross sections

Problem-dependent cross-section libraries are generated using ARP (Automatic Rapid Processing) using an interpolation algorithm that operates on pre-generated libraries created for a range of fuel properties and operating conditions
---
# ARP input format (LEU/UOX)

{configuration name}

{enrichment [%U-235]}

{number of cycles}

{fuel irradiation period(s) [days]} - 1 irradiation period/cycle

{average cycle power [MW/MTU]} - 1 power/cycle

{number interpolations per cycle}

{moderator density [g/cc]}

{interpolated library name}
---
# ARP input example (UOX)

`=arp`                
`w17x17` - Westinghouse 17x17 lattice                 
`3.65` - 3.65% enrichment                 
`3` - 3 irradiation cycles    
`400 400 350` - 400, 400, 350 day cycle lengths  
`40 35 30` - 40, 35, 30 MW/MTU  
`1 1 1` - 1 library per cycle   
`0.732` - 0.732 g/cc moderator density  
`w17_interpolated.f33` - interpolated library name  
`end`                
---
# Origen inputs are organized into cases

Each “case” block represents a single irradiation or decay cycle

Typically, each irradiation cycle uses a new interpolated library position

Representing the nearest interpolated burnup

Material compositions can be passed from one case to the next
---
## Origen 6.2 uses SON (Standard Object Notation) syntax for input

[ arrays ] - Consist of one or more numbered entries in brackets  

time = [ 10 20 30 ]

{ blocks } - contain keys and arrays

case(caseLabel){ ... }
---
# SON arrays allow for input shortcuts (similar to MCNP)

Repeat [R] N **R** X - 3 r 1E14 --> 1E14 1E14 1E14

Linear inerpolation [I] N **I** X Y - 3 i 5 1 --> 5 4 3 2 1

Log interpolation [L] N **L** X Y - 5 l 1E-9 1E-3 --> 1E-9 1E-8 1E-7 1E-6 1E-5 1E-4 1E-3
---
# Origen input structure

```
'SCALE comment  
=origen    
% ORIGEN comment  
 bounds{ ... }    
 solver{ ... }    
 options{ ... }      
case(A){         
  time=[31 365] % days    
 ...   
}  
case(B){   
 ...   
}     
end
```
Global configuration blocks  

Each cycle (irradiation or decay) is a case block with time, powers, and (optionally) library and materials

Multiple cases can be chained together to represent an irradiation history
---
# Origen input structure

Cycles can be irradiation or decay

Library and materials are optional 

Multiple cases can be chained together to represent an irradiation history
---
# Origen case block components

```
case(label){  
  time{...}  
  lib{...}     
  power=[...]     
  mat{...}   
  print{...}  
  save{...}     
  neutron{...}  
  gamma{...}  
  beta{...}   
  alpha{...}  
}
```

Specify problem times and time units  
Data library and position to use  
Problem powers (in MW)  
Specify problem materials  
Control output print options  
Specify which steps to save and output file (.f71)  
Optional blocks to control emissions
---
## How to specify times with the time block

Times may be expressed one of two ways

Via array - `time=[ 5 15 300 ]` with units of days

Via block -  
```
time{  
  t=[ 5 15 300 ]  
  units = HOURS  
}
```
---
## By default, the start time begins where the last case left off

```
case{  
  mat{ ... }  
  time=[ 1 10 25 50 ]  
  flux=[ 4 r 1E14]    
}  

case{  
  time{    
    units=YEARS  
    start=0  
    t=[ 0.1 0.3 0.9 2.7 ]  
  }   
}   
```
First case ends at 50 days
Second case will start at 50 + 365 + 36.5 unless you reset
---
# How to specify libraries

```
case{  
  mat{ ... }  
  time=[ ... ]  
  power=[ ... ]  
  lib{
       file="w17_interp.f33"  
       pos=1 % use first position on ARP interpolated library  
  } % end lib  
}
% continuation case (same library, new position)  
case{  
  time=[ ... ]  
  lib{ pos=2 } % use second position on same interpolated library  
}
```
---
# How to specify materials 

```
=origen
case{
...
% create a material with 1 kg of 3% enriched LEU
  mat{
    units=GRAMS % units include grams, gram-atoms/moles and curies
    iso=[u238=970.0E3 u235=3.0E4 o=123.1E3] % can specify individual isotope masses
  } % specifying only elemental symbol uses natural abundances for each isotope
  ...
} % end case
```

#### First case must always specify materials
---
## How to load materials from a previous case

```
=origen
case(first) {
  mat{ 
    units=GRAMS 
    iso=[u238=970.0E3 u235=3.0E4 o=123.1E3] 
  }
... 
} % end case
case(second) {
% load materials from step 4 of last case
  mat{ previous=4 } % load from step 4 of last case - default is previous=LAST
...
}
end
```
---
# How to load materials from a saved file

```
=origen
case{
...
% load from position 2 on saved f71 file
  mat{
    load{ file="origen_saved.f71" pos=2 }
  } % end mat
...
} % end case
end
```
---
## Specifying irradiation powers with the power array

```
=origen
case{
...
  mat{
     units=GRAMS
     iso=[u238=970.0E3 u235=3.0E4 o=123.1E3] 
  }
% 10 steps at 35 MW each
% 14,000 MWd/MTU total cycle burnup
  powers=[ 10R 35.0 ] % 10 steps of all the same power (35 MW)  - can be different powers for each time interval
  times=[ 8I 10 400.0 ] % # times = # powers 
} % end case
end
```

Powers are in total MW
---
# How to save case output with the save block

```
=origen
case(rad){
...
} % end case
case(decay){
  time{
    start=0
    t=[ 1 3 10 30 100 300 1000]
    units=YEARS
  }
  save{
     file="decay.f71" % save concentrations to decay.f71 for later analysis and restarts
     steps=[ 0 3 7 ] % save concentrations at initial step (time 0), then at steps 3 (10 years) and 7 (1000 years)
  }
} % end case
end
```
---
# Use of the save option LAST

```
=origen
case(rad){
...
} % end case
case(decay){
  time{
    start=0
    t=[ 1 3 10 30 100 300 1000]
    units=YEARS
  }
  save{
     file="decay.f71" 
     steps=[ LAST ] % save concentrations only for last time step (1000 years)
  }
} % end case
end
```
---
# Use of the save option ALL

```
=origen
case(rad){
...
} % end case
case(decay){
  time{
    start=0
    t=[ 1 3 10 30 100 300 1000]
    units=YEARS
  }
  save{
     file="decay.f71" 
     steps=[ ALL ] % save concentrations for all time steps
  }
} % end case
end
```
---
# Origen options for printing output

Origen output can be printed by nuclide `[nuc]` or by element `[ele]`

Output can be limited by nuclide library type

Actinides `[ac]`, fission products `[fp]`, and light elements `[le]`

Origen supports output across a number of different units

Grams, moles/gram-atoms, decay heat, weight/atom %, radiotoxicity, etc. 
---
# Origen output units for decay cases

|UNIT|Description|
|:----|:----------|
|`GRAMS`|Mass in grams|
|`MOLES`,`GRAM-ATOMS`|Number of moles of material|
|`CURIES`|Activity in Curies|
|`BECQUERELS`|Activity in Becquerels|
|`ATOMS_PPM`|Atom fractions $\times 10^6$|
|`WEIGHT_PPM`|Weight fractions $\times 10^6$|
|`WATTS`|Total decay heat in watts|
|`G-WATTS`|Total decay heat from photons in watts|
|`M3_AIR`|Radiotoxicity for inhalation in $m^3$|
|`M3_WATER`|Radiotoxicity for ingestion in $m^3$|
---
# Origen output print examples

```
% print each nuclide (with totals across each sub-library) in grams
print{
   nuc{ total=yes units=GRAMS }
}
```

```
% print each element (sub-library totals) in grams, moles, and curies
% Specify a minimum cutoff threshold of 1%
print{
   ele{ total=yes units=[GRAMS MOLES CURIES] }
      cutoffs[ ALL=1.0 ]
}
```

```
% print decay heat and  mass (by element) ONLY for fission products and  actinides
print{
   ele{ sublibs=[AC FP] units=[GRAMS WATTS] }
}
```
---
class: center,middle

# Origen sample problems
---
# Cf-252 decay for 10 years

```
=origen
bounds{ neutron=[ 20L 2.0E7 1.0E-5] } % 20 logarithmic bins spanning the energy range in eV
case{
  title="Cf-252 decay"
  lib{ file="end7dec" pos=1 }
  time{
    units=YEARS
    t=[ 0.01 0.03 0.1 0.3 1 3 10 ]
  }
 mat{
   units=CURIES
   iso=[cf252=1.0]
 }
 neutron=yes % perform neutron calculation with defaults
}
end
```
---
# Simple depletion example

```
=origen
case(rad){
lib{ file="myInterpLib.f33" pos=1 }
  time=[ 8I 10 300 ]
  power=[ 10R 30.0 ]  
  mat{
    units=GRAMS
    iso=[u235=32.5E3 u238=967.5E3]
  }
}
case(decay){
  time{
     t=[ 10L 1.0 10.0 ]
     units=YEARS
  }
  save{
     file="simple.f71"
     steps=ALL
  }
}
end
```

Irradiate 1 MTU at 3.25% enrichment for 300 days at 30MW   
Decay for 10 years and save all decay steps
---

---
![doggehs](img/final.jpg)
</textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/contrib/auto-render.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <script type="text/javascript">
        var options = {};
        var renderMath = function() {
            renderMathInElement(document.body, {delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\[", right: "\\]", display: false},
            ]});
        }
        var slideshow = remark.create({
          // Set the slideshow display ratio
          // Default: '4:3'
          // Alternatives: '16:9', ...
          ratio: '16:9',
          // Navigation options
          navigation: {
          // Enable or disable navigating using scroll
          // Default: true
          // Alternatives: false
          scroll: true,
          // Enable or disable navigation using touch
          // Default: true
          // Alternatives: false
          touch: true,
          // Enable or disable navigation using click
          // Default: false
          // Alternatives: true
          click: false
          },
          // Customize slide number label, either using a format string..
          slideNumberFormat: '%current%',
          // Enable or disable counting of incremental slides in the slide counting
          countIncrementalSlides: false 
          }, renderMath);
    </script>
    <script type="text/javascript">
     /**
      * a simple zoom in/out/reset for remark.js
      *
      * Hot key:
      *   + : zoom in
      *   - : zoom out
      *   0 : reset zoom
      *
      * CAVEAT: when switching between full screen and normal screen,
      *         the zoom factor may not function correctly.
      *         RELOAD the page, if necessary.
      *
      * 
      * @author William Yeh <william.pjyeh@gmail.com>
      * @date   2015-01-15
      *
      * @license Apache License, Version 2.0.
      * Copyright © 2015 William Yeh.
      */
      var ZOOM_TEXT_SELECTOR =
       ".remark-slide-content p"
       + "," + ".remark-slide-content .remark-code-line"
       ;

      var ZOOM_IMG_SELECTOR =
       ".remark-slide-content img:hover"
       ;

      var ZOOM_IMG_RULE;

      var zoom_factor = 100.0;
      document.body.style.zoom = "100%"
    
      function init_zoom_rule() {
       // @see http://davidwalsh.name/add-rules-stylesheets
       var styles = document.styleSheets[0];
       var index = styles.insertRule(
        ZOOM_IMG_SELECTOR + ' { transform:scale(1); }',
        styles.cssRules.length
        );

        ZOOM_IMG_RULE = styles.cssRules.item(index);
       }
    
      function apply_zoom() {
       var elements = document.querySelectorAll(ZOOM_TEXT_SELECTOR);
       //console.log('length:', elements.length);
       for (var i = 0; i < elements.length; ++i) {
        var item = elements[i];
        item.style.fontSize = zoom_factor.toString() + '%';
        }

        ZOOM_IMG_RULE.style.transform = 'scale(' + (zoom_factor / 100) + ')';
      }

      function zoom_in() {
       zoom_factor += 10;
       if (zoom_factor >= 200.0)  zoom_factor = 200.0;
       apply_zoom();
      }
    
      function zoom_out() {
       zoom_factor -= 10;
       if (zoom_factor <= 50.0)  zoom_factor = 50.0;
       apply_zoom();
      }

      function zoom_reset() {
       zoom_factor = 100.0;
       apply_zoom();
      }

      init_zoom_rule();
      window.addEventListener("keydown", function(event) {
       //console.log(event.keyCode);
       switch (event.keyCode) {
        case 187:  // '+': 187 in Chrome & Safari, 61 in FF
        case 61:  // '+': 187 in Chrome, 61 in FF
         zoom_in(); 
         break;

        case 189:  // '-': 189 in Chrome & Safari, 173 in FF
        case 173:  // '-': 189 in Chrome, 173 in FF
         zoom_out();
         break;
        case 48:   // '0'
         zoom_reset();
         break;
       }
      }, false);
    </script>
  </body>
</html>
